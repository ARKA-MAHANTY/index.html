<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Study Task Pro</title>
  <style>
    :root {
      --primary-color: #3498db;
      --secondary-color: #2ecc71;
      --danger-color: #e74c3c;
      --warning-color: #f39c12;
      --dark-color: #2c3e50;
      --light-color: #3498db;
      --gray-color: #95a5a6;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f5f7fa;
      color: #333;
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    header {
      background-color: white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
    }

    .logo {
      font-size: 24px;
      font-weight: bold;
      color: var(--dark-color);
      text-decoration: none;
      display: flex;
      align-items: center;
    }

    .logo i {
      margin-right: 10px;
      color: var(--primary-color);
    }

    .nav-links {
      display: flex;
      list-style: none;
    }

    .nav-links li {
      margin-left: 30px;
    }

    .nav-links a {
      text-decoration: none;
      color: var(--dark-color);
      font-weight: 500;
      transition: color 0.3s;
      display: flex;
      align-items: center;
    }

    .nav-links a:hover {
      color: var(--primary-color);
    }

    .nav-links a i {
      margin-right: 8px;
    }

    .active {
      color: var(--primary-color) !important;
    }

    .page-container {
      padding: 40px 0;
      min-height: calc(100vh - 120px);
    }

    .page-header {
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .page-title {
      font-size: 28px;
      color: var(--dark-color);
    }

    .task-manager {
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      padding: 30px;
    }

    .task-form {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 30px;
    }

    .task-form input, .task-form select, .task-form textarea {
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-family: inherit;
      font-size: 16px;
    }

    .task-form input {
      flex: 2;
      min-width: 250px;
    }

    .task-form select {
      flex: 1;
      min-width: 150px;
    }

    .task-form textarea {
      width: 100%;
      min-height: 80px;
      resize: vertical;
    }

    .task-form button {
      padding: 12px 25px;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      transition: background-color 0.3s;
    }

    .task-form button:hover {
      background-color: #2980b9;
    }

    .form-row {
      display: flex;
      gap: 15px;
      width: 100%;
    }

    .sample-tasks {
      margin-bottom: 25px;
      background-color: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
    }

    .sample-tasks h3 {
      margin-bottom: 15px;
      color: var(--dark-color);
    }

    .sample-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .sample-buttons button {
      padding: 8px 15px;
      background-color: var(--secondary-color);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.3s;
    }

    .sample-buttons button:hover {
      background-color: #27ae60;
    }

    .filter-options {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 25px;
      background-color: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
    }

    .filter-options select, .filter-options button, .filter-options input {
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-family: inherit;
    }

    .filter-options button {
      background-color: var(--dark-color);
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .filter-options button:hover {
      background-color: #1a252f;
    }

    .task-list {
      list-style: none;
    }

    .task-list li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      border: 1px solid #eee;
      border-radius: 8px;
      margin-bottom: 10px;
      background: white;
      transition: all 0.3s;
    }

    .task-list li:hover {
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }

    .task-list li.completed {
      background-color: #f9f9f9;
    }

    .task-list li.completed .task-text {
      text-decoration: line-through;
      color: var(--gray-color);
    }

    .task-info {
      display: flex;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .task-priority {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }

    .priority-high {
      background-color: var(--danger-color);
    }

    .priority-medium {
      background-color: var(--warning-color);
    }

    .priority-low {
      background-color: var(--secondary-color);
    }

    .task-text {
      flex: 1;
      min-width: 200px;
    }

    .task-category {
      font-size: 0.8em;
      padding: 4px 10px;
      border-radius: 12px;
      background-color: #e0f7fa;
      color: #00838f;
    }

    .task-due {
      font-size: 0.8em;
      color: var(--gray-color);
    }

    .task-actions {
      display: flex;
      gap: 10px;
    }

    .task-actions button {
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
    }

    .complete-btn {
      background-color: var(--secondary-color);
      color: white;
    }

    .complete-btn:hover {
      background-color: #27ae60;
    }

    .edit-btn {
      background-color: var(--primary-color);
      color: white;
    }

    .edit-btn:hover {
      background-color: #2980b9;
    }

    .delete-btn {
      background-color: var(--danger-color);
      color: white;
    }

    .delete-btn:hover {
      background-color: #c0392b;
    }

    .stats-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
      text-align: center;
    }

    .stat-value {
      font-size: 36px;
      font-weight: bold;
      color: var(--primary-color);
      margin: 10px 0;
    }

    .stat-label {
      color: var(--gray-color);
      font-size: 14px;
    }

    .analytics-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }

    .chart-container {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
    }

    .chart-placeholder {
      height: 300px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #f8f9fa;
      border-radius: 6px;
      color: var(--gray-color);
    }

    .resources-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 25px;
    }

    .resource-card {
      background-color: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s;
    }

    .resource-card:hover {
      transform: translateY(-5px);
    }

    .resource-image {
      height: 150px;
      background-color: #e0f7fa;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary-color);
      font-size: 40px;
    }

    .resource-content {
      padding: 20px;
    }

    .resource-title {
      font-size: 18px;
      margin-bottom: 10px;
      color: var(--dark-color);
    }

    .resource-description {
      color: var(--gray-color);
      font-size: 14px;
      margin-bottom: 15px;
    }

    .resource-link {
      display: inline-block;
      padding: 8px 15px;
      background-color: var(--primary-color);
      color: white;
      text-decoration: none;
      border-radius: 4px;
      font-size: 14px;
      transition: background-color 0.3s;
    }

    .resource-link:hover {
      background-color: #2980b9;
    }

    footer {
      background-color: var(--dark-color);
      color: white;
      padding: 30px 0;
      text-align: center;
    }

    .footer-content {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .footer-links {
      display: flex;
      list-style: none;
      margin: 20px 0;
    }

    .footer-links li {
      margin: 0 15px;
    }

    .footer-links a {
      color: white;
      text-decoration: none;
      transition: color 0.3s;
    }

    .footer-links a:hover {
      color: var(--primary-color);
    }

    .copyright {
      color: rgba(255, 255, 255, 0.7);
      font-size: 14px;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 8px;
      width: 100%;
      max-width: 500px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-title {
      font-size: 20px;
      color: var(--dark-color);
    }

    .close-modal {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--gray-color);
    }

    @media (max-width: 768px) {
      .analytics-container {
        grid-template-columns: 1fr;
      }

      .navbar {
        flex-direction: column;
        padding: 15px;
      }

      .nav-links {
        margin-top: 15px;
      }

      .nav-links li {
        margin: 0 10px;
      }

      .form-row {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <nav class="navbar">
        <a href="#" class="logo" onclick="showPage('home')">
          <i class="fas fa-tasks"></i> Study Task Pro
        </a>
        <ul class="nav-links">
          <li><a href="#" onclick="showPage('home')" class="active"><i class="fas fa-home"></i> Home</a></li>
          <li><a href="#" onclick="showPage('analytics')"><i class="fas fa-chart-bar"></i> Analytics</a></li>
          <li><a href="#" onclick="showPage('resources')"><i class="fas fa-book"></i> Resources</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
   <div id="home-page" class="page-container">
      <div class="container">
        <div class="page-header">
          <h1 class="page-title">Task Manager</h1>
          <button onclick="openExportModal()" style="padding: 10px 15px; background-color: var(--dark-color); color: white; border: none; border-radius: 5px; cursor: pointer;">
            <i class="fas fa-file-export"></i> Export Tasks
          </button>
        </div>

        <div class="task-manager">
          <form class="task-form" onsubmit="addTask(); return false;">
            <div class="form-row">
              <input type="text" id="task-input" placeholder="Enter task (e.g., 'Practice binary tree problems')" required>
              <select id="task-category" required>
                <option value="">Select Category</option>
                <option value="Data Structures">Data Structures</option>
                <option value="Algorithms">Algorithms</option>
                <option value="System Design">System Design</option>
                <option value="Coding Practice">Coding Practice</option>
                <option value="Behavioral Prep">Behavioral Prep</option>
                <option value="Resume">Resume</option>
                <option value="Other">Other</option>
              </select>
              <select id="task-priority" required>
                <option value="high">High Priority</option>
                <option value="medium" selected>Medium Priority</option>
                <option value="low">Low Priority</option>
              </select>
            </div>
            <div class="form-row">
              <textarea id="task-notes" placeholder="Additional notes (optional)"></textarea>
            </div>
            <div class="form-row">
              <input type="date" id="task-due">
              <button type="submit"><i class="fas fa-plus"></i> Add Task</button>
            </div>
          </form>

          <div class="sample-tasks">
            <h3>Quick Add Common Tasks:</h3>
            <div class="sample-buttons">
              <button onclick="addSampleTask('Solve 2 Leetcode medium problems', 'Coding Practice', 'high')">
                <i class="fas fa-code"></i> Leetcode Practice
              </button>
              <button onclick="addSampleTask('Review hash table concepts', 'Data Structures', 'medium')">
                <i class="fas fa-project-diagram"></i> Data Structures
              </button>
              <button onclick="addSampleTask('Prepare STAR stories', 'Behavioral Prep', 'medium')">
                <i class="fas fa-comments"></i> Behavioral Prep
              </button>
              <button onclick="addSampleTask('Update resume with new project', 'Resume', 'low')">
                <i class="fas fa-file-alt"></i> Update Resume
              </button>
            </div>
          </div>

          <div class="filter-options">
            <select id="filter-category">
              <option value="all">All Categories</option>
              <option value="Data Structures">Data Structures</option>
              <option value="Algorithms">Algorithms</option>
              <option value="System Design">System Design</option>
              <option value="Coding Practice">Coding Practice</option>
              <option value="Behavioral Prep">Behavioral Prep</option>
              <option value="Resume">Resume</option>
              <option value="Other">Other</option>
            </select>
            <select id="filter-priority">
              <option value="all">All Priorities</option>
              <option value="high">High Priority</option>
              <option value="medium">Medium Priority</option>
              <option value="low">Low Priority</option>
            </select>
            <select id="filter-status">
              <option value="all">All Tasks</option>
              <option value="completed">Completed Only</option>
              <option value="pending">Pending Only</option>
            </select>
            <input type="text" id="search-input" placeholder="Search tasks...">
            <button onclick="filterTasks()"><i class="fas fa-filter"></i> Apply Filters</button>
            <button onclick="resetFilters()"><i class="fas fa-sync-alt"></i> Reset</button>
          </div>

          <div class="stats-section">
            <div class="stat-card">
              <div class="stat-label">Total Tasks</div>
              <div class="stat-value" id="total-tasks">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Completed</div>
              <div class="stat-value" id="completed-tasks">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">High Priority</div>
              <div class="stat-value" id="high-priority">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Due Soon</div>
              <div class="stat-value" id="due-soon">0</div>
            </div>
          </div>

          <ul class="task-list" id="task-list">
           </ul>
        </div>
      </div>
    </div>

   <div id="analytics-page" class="page-container" style="display: none;">
      <div class="container">
        <div class="page-header">
          <h1 class="page-title">Your Study Analytics</h1>
        </div>

        <div class="analytics-container">
          <div class="chart-container">
            <h3>Tasks by Category</h3>
            <div class="chart-placeholder">
              [Chart: Distribution of tasks by category]
            </div>
          </div>
          <div class="chart-container">
            <h3>Completion Rate</h3>
            <div class="chart-placeholder">
              [Chart: Completed vs Pending tasks]
            </div>
          </div>
          <div class="chart-container">
            <h3>Weekly Progress</h3>
            <div class="chart-placeholder">
              [Chart: Tasks completed per day]
            </div>
          </div>
          <div class="chart-container">
            <h3>Priority Distribution</h3>
            <div class="chart-placeholder">
              [Chart: High/Medium/Low priority tasks]
            </div>
          </div>
        </div>

        <div class="task-manager" style="margin-top: 30px;">
          <h3>Recent Completed Tasks</h3>
          <ul class="task-list" id="completed-tasks-list">
            </ul>
        </div>
      </div>
    </div>

    <div id="resources-page" class="page-container" style="display: none;">
      <div class="container">
        <div class="page-header">
          <h1 class="page-title">Study Resources</h1>
        </div>

        <div class="resources-grid">
          <div class="resource-card">
            <div class="resource-image">
              <i class="fas fa-laptop-code"></i>
            </div>
            <div class="resource-content">
              <h3 class="resource-title">Leetcode Problems</h3>
              <p class="resource-description">Practice coding problems categorized by difficulty and company</p>
              <a href="https://leetcode.com/" target="_blank" class="resource-link">Visit Resource</a>
            </div>
          </div>

          <div class="resource-card">
            <div class="resource-image">
              <i class="fas fa-project-diagram"></i>
            </div>
            <div class="resource-content">
              <h3 class="resource-title">System Design Primer</h3>
              <p class="resource-description">Learn how to design scalable systems with this GitHub repository</p>
              <a href="https://github.com/donnemartin/system-design-primer" target="_blank" class="resource-link">Visit Resource</a>
            </div>
          </div>

          <div class="resource-card">
            <div class="resource-image">
              <i class="fas fa-book"></i>
            </div>
            <div class="resource-content">
              <h3 class="resource-title">Cracking the Coding Interview</h3>
              <p class="resource-description">The classic book with 189 programming questions and solutions</p>
              <a href="https://www.crackingthecodinginterview.com/" target="_blank" class="resource-link">Visit Resource</a>
            </div>
          </div>

          <div class="resource-card">
            <div class="resource-image">
              <i class="fas fa-comments"></i>
            </div>
            <div class="resource-content">
              <h3 class="resource-title">Behavioral Questions</h3>
              <p class="resource-description">Common behavioral interview questions with sample answers</p>
              <a href="https://www.themuse.com/advice/30-behavioral-interview-questions-you-should-be-ready-to-answer" target="_blank" class="resource-link">Visit Resource</a>
            </div>
          </div>

          <div class="resource-card">
            <div class="resource-image">
              <i class="fas fa-graduation-cap"></i>
            </div>
            <div class="resource-content">
              <h3 class="resource-title">CS50 by Harvard</h3>
              <p class="resource-description">Free computer science course covering fundamental concepts</p>
              <a href="https://cs50.harvard.edu/" target="_blank" class="resource-link">Visit Resource</a>
            </div>
          </div>

          <div class="resource-card">
            <div class="resource-image">
              <i class="fas fa-code-branch"></i>
            </div>
            <div class="resource-content">
              <h3 class="resource-title">Tech Interview Handbook</h3>
              <p class="resource-description">Curated interview preparation materials for busy engineers</p>
              <a href="https://github.com/yangshun/tech-interview-handbook" target="_blank" class="resource-link">Visit Resource</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <div class="modal" id="export-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Export Tasks</h3>
        <button class="close-modal" onclick="closeModal('export-modal')">&times;</button>
      </div>
      <div style="margin-bottom: 20px;">
        <p>Select format to export your tasks:</p>
        <div style="display: flex; gap: 15px; margin-top: 15px;">
          <button onclick="exportTasks('csv')" style="padding: 10px 15px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer;">
            <i class="fas fa-file-csv"></i> CSV
          </button>
          <button onclick="exportTasks('json')" style="padding: 10px 15px; background-color: var(--secondary-color); color: white; border: none; border-radius: 5px; cursor: pointer;">
            <i class="fas fa-file-code"></i> JSON
          </button>
          <button onclick="exportTasks('pdf')" style="padding: 10px 15px; background-color: var(--danger-color); color: white; border: none; border-radius: 5px; cursor: pointer;">
            <i class="fas fa-file-pdf"></i> PDF
          </button>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <div class="container">
      <div class="footer-content">
        <a href="#" class="logo" style="color: white; margin-bottom: 15px;">
          <i class="fas fa-tasks"></i> Study Task Pro
        </a>
        <ul class="footer-links">
          <li><a href="#" onclick="showPage('home')">Home</a></li>
          <li><a href="#" onclick="showPage('analytics')">Analytics</a></li>
          <li><a href="#" onclick="showPage('resources')">Resources</a></li>
          <li><a href="#">About</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
        <p class="copyright">&copy; 2023 Study Task Pro. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

  <script>
    let tasks = [];
    let taskId = 1;
    let currentPage = 'home';

    document.addEventListener('DOMContentLoaded', () => {
      loadTasks();
      showPage(currentPage);
    });

    function showPage(page) {
      document.getElementById('home-page').style.display = 'none';
      document.getElementById('analytics-page').style.display = 'none';
      document.getElementById('resources-page').style.display = 'none';
      
      document.getElementById(`${page}-page`).style.display = 'block';
      currentPage = page;
      
      document.querySelectorAll('.nav-links a').forEach(link => {
        link.classList.remove('active');
      });
      event.target.classList.add('active');
      
     if (page === 'home') {
        renderTasks();
      } else if (page === 'analytics') {
        renderCompletedTasks();
      }
    }

    function addTask() {
      const taskInput = document.getElementById('task-input');
      const taskText = taskInput.value.trim();
      const category = document.getElementById('task-category').value;
      const priority = document.getElementById('task-priority').value;
      const notes = document.getElementById('task-notes').value.trim();
      const dueDate = document.getElementById('task-due').value;

      if (!taskText || !category) {
        alert('Please fill in all required fields!');
        return;
      }

      const newTask = {
        id: taskId++,
        text: taskText,
        category: category,
        priority: priority,
        notes: notes,
        dueDate: dueDate,
        completed: false,
        createdAt: new Date().toISOString(),
        completedAt: null
      };

      tasks.push(newTask);
      saveTasks();
      renderTasks();
      updateStats();

      taskInput.value = '';
      document.getElementById('task-notes').value = '';
      document.getElementById('task-due').value = '';
      taskInput.focus();
    }

    function addSampleTask(text, category, priority) {
      const newTask = {
        id: taskId++,
        text: text,
        category: category,
        priority: priority,
        notes: '',
        dueDate: '',
        completed: false,
        createdAt: new Date().toISOString(),
        completedAt: null
      };

      tasks.push(newTask);
      saveTasks();
      renderTasks();
      updateStats();
    }

    function renderTasks(filteredTasks = null) {
      const taskList = document.getElementById('task-list');
      taskList.innerHTML = '';

      const tasksToRender = filteredTasks || tasks;

      if (tasksToRender.length === 0) {
        taskList.innerHTML = `
          <li style="justify-content: center; color: var(--gray-color);">
            <i class="fas fa-tasks" style="margin-right: 10px;"></i>
            No tasks found. Add some tasks to get started!
          </li>
        `;
        return;
      }

      tasksToRender.forEach(task => {
        const li = document.createElement('li');
        if (task.completed) {
          li.classList.add('completed');
        }

        let dueDateDisplay = '';
        if (task.dueDate) {
          const dueDate = new Date(task.dueDate);
          dueDateDisplay = `Due: ${dueDate.toLocaleDateString()}`;
        }

        li.innerHTML = `
          <div class="task-info">
            <span class="task-priority priority-${task.priority}"></span>
            <span class="task-text">${task.text}</span>
            <span class="task-category">${task.category}</span>
            ${task.dueDate ? `<span class="task-due">${dueDateDisplay}</span>` : ''}
          </div>
          <div class="task-actions">
            <button class="complete-btn" onclick="toggleComplete(${task.id})">
              <i class="fas fa-${task.completed ? 'undo' : 'check'}"></i> ${task.completed ? 'Undo' : 'Complete'}
            </button>
            <button class="edit-btn" onclick="editTask(${task.id})">
              <i class="fas fa-edit"></i> Edit
            </button>
            <button class="delete-btn" onclick="deleteTask(${task.id})">
              <i class="fas fa-trash"></i> Delete
            </button>
          </div>
        `;

        taskList.appendChild(li);
      });
    }

    function renderCompletedTasks() {
      const completedTasksList = document.getElementById('completed-tasks-list');
      completedTasksList.innerHTML = '';

      const completedTasks = tasks.filter(task => task.completed).slice(0, 5);

      if (completedTasks.length === 0) {
        completedTasksList.innerHTML = `
          <li style="justify-content: center; color: var(--gray-color);">
            No completed tasks yet. Keep working!
          </li>
        `;
        return;
      }

      completedTasks.forEach(task => {
        const li = document.createElement('li');
        li.classList.add('completed');

        let completedAtDisplay = '';
        if (task.completedAt) {
          const completedDate = new Date(task.completedAt);
          completedAtDisplay = `Completed: ${completedDate.toLocaleDateString()}`;
        }

        li.innerHTML = `
          <div class="task-info">
            <span class="task-priority priority-${task.priority}"></span>
            <span class="task-text">${task.text}</span>
            <span class="task-category">${task.category}</span>
            ${completedAtDisplay ? `<span class="task-due">${completedAtDisplay}</span>` : ''}
          </div>
        `;

        completedTasksList.appendChild(li);
      });
    }

    function toggleComplete(id) {
      const taskIndex = tasks.findIndex(task => task.id === id);
      if (taskIndex !== -1) {
        tasks[taskIndex].completed = !tasks[taskIndex].completed;
        tasks[taskIndex].completedAt = tasks[taskIndex].completed ? new Date().toISOString() : null;
        saveTasks();
        renderTasks();
        updateStats();
      }
    }

    function editTask(id) {
      const task = tasks.find(task => task.id === id);
      if (!task) return;

     alert(`Editing task: ${task.text}\nThis would open an edit form in a real application.`);
    }

    function deleteTask(id) {
      if (confirm('Are you sure you want to delete this task?')) {
        tasks = tasks.filter(task => task.id !== id);
        saveTasks();
        renderTasks();
        updateStats();
      }
    }

    function filterTasks() {
      const categoryFilter = document.getElementById('filter-category').value;
      const priorityFilter = document.getElementById('filter-priority').value;
      const statusFilter = document.getElementById('filter-status').value;
      const searchQuery = document.getElementById('search-input').value.toLowerCase();

      let filteredTasks = [...tasks];

      if (categoryFilter !== 'all') {
        filteredTasks = filteredTasks.filter(task => task.category === categoryFilter);
      }

      if (priorityFilter !== 'all') {
        filteredTasks = filteredTasks.filter(task => task.priority === priorityFilter);
      }

      if (statusFilter !== 'all') {
        const isCompleted = statusFilter === 'completed';
        filteredTasks = filteredTasks.filter(task => task.completed === isCompleted);
      }

      if (searchQuery) {
        filteredTasks = filteredTasks.filter(task => 
          task.text.toLowerCase().includes(searchQuery) || 
          (task.notes && task.notes.toLowerCase().includes(searchQuery))
        );
      }

      renderTasks(filteredTasks);
    }

    function resetFilters() {
      document.getElementById('filter-category').value = 'all';
      document.getElementById('filter-priority').value = 'all';
      document.getElementById('filter-status').value = 'all';
      document.getElementById('search-input').value = '';
      renderTasks();
    }

    function updateStats() {
      document.getElementById('total-tasks').textContent = tasks.length;
      document.getElementById('completed-tasks').textContent = tasks.filter(task => task.completed).length;
      
      const highPriorityCount = tasks.filter(task => task.priority === 'high').length;
      document.getElementById('high-priority').textContent = highPriorityCount;
      
      const today = new Date();
      const dueSoonCount = tasks.filter(task => {
        if (!task.dueDate || task.completed) return false;
        const dueDate = new Date(task.dueDate);
        const diffTime = dueDate - today;
        const diffDays = diffTime / (1000 * 60 * 60 * 24);
        return diffDays <= 3 && diffDays >= 0;
      }).length;
      
      document.getElementById('due-soon').textContent = dueSoonCount;
    }

   function loadTasks() {
      const savedTasks = localStorage.getItem('studyTasks');
      if (savedTasks) {
        tasks = JSON.parse(savedTasks);
        taskId = tasks.length > 0 ? Math.max(...tasks.map(task => task.id)) + 1 : 1;
        renderTasks();
        updateStats();
      }
    }

    function saveTasks() {
      localStorage.setItem('studyTasks', JSON.stringify(tasks));
    }

    function openExportModal() {
      document.getElementById('export-modal').style.display = 'flex';
    }

    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    function exportTasks(format) {
      let exportContent = '';
      let filename = 'study-tasks';
      
      switch(format) {
        case 'csv':
          exportContent = 'Task Text,Category,Priority,Due Date,Status,Notes\n';
          tasks.forEach(task => {
            exportContent += `"${task.text}","${task.category}","${task.priority}","${task.dueDate || ''}","${task.completed ? 'Completed' : 'Pending'}","${task.notes || ''}"\n`;
          });
          filename += '.csv';
          break;
          
        case 'json':
          exportContent = JSON.stringify(tasks, null, 2);
          filename += '.json';
          break;
          
        case 'pdf':
          alert('PDF export would be implemented with a library like jsPDF in a real application');
          return;
      }
      
      const blob = new Blob([exportContent], { type: `text/${format}` });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      closeModal('export-modal');
    }
  </script>
</body>
</html>
